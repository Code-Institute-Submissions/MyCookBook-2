{% extends 'base.html' %} {% block content %}
<section class="margin-top-large">
  <div class="container center-align">
    <h1>{{ username }}'s account</h1>
    <div>
      {% with messages = get_flashed_messages() %} 
      {% if messages %} 
      {% for message in messages %}
      <p class="error-message">
        {{ message }}
      </p>
      {% endfor %} {% endif %} {% endwith %}
    </div>
    <div class="row center-align">
      <div class="col s12 m4">
        <a href="{{ url_for('change_username', username = session.username) }}"
          >Change username</a
        >
      </div>
      <div class="col s12 m4">
        <a href="{{ url_for('change_password', username = session.username) }}"
          >Change password</a
        >
      </div>
      <div class="col s12 m4">
        <a href="#delete-modal-account" class="modal-trigger">Delete account</a>
      </div>
    </div>
  </div>
</section>
<!--Delete Account Modal -->
<div id="delete-modal-account" class="modal">
  <div class="modal-content center-align container-95">
    <h5 class="text-red bold">Delete Account</h5>
    <div class="divider"></div>
    <p class="text-red">
     <h6 class="margin-top-small"> Are you sure you want to delete your account?</h6>
     <form action="{{ url_for('delete_account', username = session.username) }}" method="POST">
     <div class="row center-align margin-top-small">
     <div class="input-field col s12 m6 offset-m3">
          <i class="material-icons prefix">lock</i>
          <input
            placeholder="Enter password to confirm"
            id="confirmed_password"
            name="confirmed_password"
            type="password"
            class="validate"
            required
          />
          <label for="confirmed_password">Confirm password</label>
        </div>
        </div>
     <!--Get flashed messages-->
    <div class="row center-align">
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <p class="flash-error margin-top-small">
            {{ message }}
        </p>
        {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
    <div class="margin-top-small">
    <a href="{{ url_for('account_settings',  username = session.username) }}" class="modal-close btn btn-secondary waves-effect waves-light z-depth-2"
      >Cancel</a
    >
    <button
      class="btn btn-red waves-effect waves-light z-depth-2"
      href="#"
      >Delete Account</button
    >
  </div>
  </form>
  </div>
</div>
{% endblock %}
